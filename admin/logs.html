<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logs - Admin - TrueVault VPN</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #0f0f1a, #1a1a2e); color: #fff; min-height: 100vh; }
        .sidebar { position: fixed; left: 0; top: 0; width: 250px; height: 100vh; background: rgba(0,0,0,0.3); border-right: 1px solid rgba(255,255,255,0.1); padding: 1.5rem; display: flex; flex-direction: column; }
        .logo { display: flex; align-items: center; gap: 10px; margin-bottom: 2rem; }
        .logo-icon { font-size: 1.8rem; }
        .logo-text { font-size: 1.3rem; font-weight: 700; background: linear-gradient(90deg, #00d9ff, #00ff88); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .logo-badge { font-size: 0.7rem; background: #ff5050; padding: 2px 6px; border-radius: 4px; margin-left: auto; }
        .nav { display: flex; flex-direction: column; gap: 0.5rem; flex: 1; }
        .nav-item { display: flex; align-items: center; gap: 10px; padding: 0.75rem 1rem; border-radius: 8px; text-decoration: none; color: #888; transition: all 0.2s; }
        .nav-item:hover { background: rgba(255,255,255,0.05); color: #fff; }
        .nav-item.active { background: rgba(0,217,255,0.1); color: #00d9ff; border-left: 3px solid #00d9ff; }
        .main { margin-left: 250px; padding: 2rem; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; }
        .page-title { font-size: 1.5rem; }
        .filters { display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap; }
        .filter-select, .filter-input { padding: 0.75rem 1rem; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: #fff; }
        .card { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem; }
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
        .log-list { display: flex; flex-direction: column; gap: 0.5rem; max-height: 600px; overflow-y: auto; }
        .log-item { display: flex; gap: 1rem; padding: 0.75rem; background: rgba(0,0,0,0.2); border-radius: 6px; font-family: monospace; font-size: 0.85rem; }
        .log-item.error { border-left: 3px solid #ff5050; }
        .log-item.warning { border-left: 3px solid #ffa500; }
        .log-item.info { border-left: 3px solid #00d9ff; }
        .log-item.success { border-left: 3px solid #00ff88; }
        .log-time { color: #666; min-width: 180px; }
        .log-level { min-width: 70px; font-weight: 600; }
        .log-level.error { color: #ff5050; }
        .log-level.warning { color: #ffa500; }
        .log-level.info { color: #00d9ff; }
        .log-level.success { color: #00ff88; }
        .log-message { flex: 1; color: #ccc; }
        .log-source { color: #888; font-size: 0.8rem; }
        .btn { padding: 0.5rem 1rem; border: none; border-radius: 6px; cursor: pointer; font-weight: 500; }
        .btn-primary { background: linear-gradient(90deg, #00d9ff, #00ff88); color: #0f0f1a; }
        .btn-secondary { background: rgba(255,255,255,0.1); color: #fff; }
        .btn-danger { background: rgba(255,80,80,0.2); color: #ff5050; }
        .live-indicator { display: flex; align-items: center; gap: 0.5rem; }
        .live-dot { width: 8px; height: 8px; background: #00ff88; border-radius: 50%; animation: pulse 1s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    </style>
</head>
<body>
    <aside class="sidebar">
        <div class="logo">
            <span class="logo-icon">üîê</span>
            <span class="logo-text">TrueVault</span>
            <span class="logo-badge">ADMIN</span>
        </div>
        <nav class="nav">
            <a href="index.html" class="nav-item"><span class="nav-icon">üìä</span> Dashboard</a>
            <a href="users.html" class="nav-item"><span class="nav-icon">üë•</span> Users</a>
            <a href="servers.html" class="nav-item"><span class="nav-icon">üñ•Ô∏è</span> Servers</a>
            <a href="billing.html" class="nav-item"><span class="nav-icon">üí≥</span> Billing</a>
            <a href="logs.html" class="nav-item active"><span class="nav-icon">üìã</span> Logs</a>
            <a href="settings.html" class="nav-item"><span class="nav-icon">‚öôÔ∏è</span> Settings</a>
        </nav>
        <div style="margin-top: auto; padding-top: 1rem; border-top: 1px solid rgba(255,255,255,0.1);">
            <a href="/" class="nav-item"><span class="nav-icon">üåê</span> View Site</a>
            <a href="#" class="nav-item" onclick="logout()"><span class="nav-icon">üö™</span> Logout</a>
        </div>
    </aside>

    <main class="main">
        <header class="header">
            <h1 class="page-title">System Logs</h1>
            <div class="live-indicator">
                <span class="live-dot"></span>
                <span>Live</span>
            </div>
        </header>

        <div class="filters">
            <select class="filter-select" id="levelFilter" onchange="filterLogs()">
                <option value="">All Levels</option>
                <option value="error">Error</option>
                <option value="warning">Warning</option>
                <option value="info">Info</option>
                <option value="success">Success</option>
            </select>
            <select class="filter-select" id="sourceFilter" onchange="filterLogs()">
                <option value="">All Sources</option>
                <option value="auth">Authentication</option>
                <option value="billing">Billing</option>
                <option value="vpn">VPN</option>
                <option value="server">Server</option>
                <option value="api">API</option>
            </select>
            <input type="text" class="filter-input" placeholder="Search logs..." id="searchInput" onkeyup="filterLogs()">
            <button class="btn btn-secondary" onclick="refreshLogs()">üîÑ Refresh</button>
            <button class="btn btn-secondary" onclick="exportLogs()">üì• Export</button>
            <button class="btn btn-danger" onclick="clearLogs()">üóëÔ∏è Clear</button>
        </div>

        <div class="card">
            <div class="card-header">
                <h3>Activity Log</h3>
                <span id="logCount">0 entries</span>
            </div>
            <div class="log-list" id="logList">
                <div class="log-item success">
                    <span class="log-time">2026-01-12 21:45:32</span>
                    <span class="log-level success">SUCCESS</span>
                    <span class="log-message">User login successful</span>
                    <span class="log-source">auth</span>
                </div>
                <div class="log-item info">
                    <span class="log-time">2026-01-12 21:44:18</span>
                    <span class="log-level info">INFO</span>
                    <span class="log-message">New subscription created: Basic Plan</span>
                    <span class="log-source">billing</span>
                </div>
                <div class="log-item info">
                    <span class="log-time">2026-01-12 21:43:05</span>
                    <span class="log-level info">INFO</span>
                    <span class="log-message">VPN peer added to server NY</span>
                    <span class="log-source">vpn</span>
                </div>
                <div class="log-item warning">
                    <span class="log-time">2026-01-12 21:42:11</span>
                    <span class="log-level warning">WARNING</span>
                    <span class="log-message">High load detected on server Toronto (78%)</span>
                    <span class="log-source">server</span>
                </div>
                <div class="log-item error">
                    <span class="log-time">2026-01-12 21:40:55</span>
                    <span class="log-level error">ERROR</span>
                    <span class="log-message">Payment failed for user bob@example.com</span>
                    <span class="log-source">billing</span>
                </div>
                <div class="log-item success">
                    <span class="log-time">2026-01-12 21:38:22</span>
                    <span class="log-level success">SUCCESS</span>
                    <span class="log-message">Server health check passed: All servers online</span>
                    <span class="log-source">server</span>
                </div>
                <div class="log-item info">
                    <span class="log-time">2026-01-12 21:35:10</span>
                    <span class="log-level info">INFO</span>
                    <span class="log-message">New user registration: jane@example.com</span>
                    <span class="log-source">auth</span>
                </div>
                <div class="log-item info">
                    <span class="log-time">2026-01-12 21:30:00</span>
                    <span class="log-level info">INFO</span>
                    <span class="log-message">Cron job executed: processRevocations</span>
                    <span class="log-source">api</span>
                </div>
            </div>
        </div>
    </main>

    <script>
        let adminToken = localStorage.getItem('truevault_admin_token');
        if (!adminToken) window.location.href = '/admin/login.html';

        const allLogs = document.querySelectorAll('.log-item');
        document.getElementById('logCount').textContent = allLogs.length + ' entries';

        function filterLogs() {
            const level = document.getElementById('levelFilter').value;
            const source = document.getElementById('sourceFilter').value;
            const search = document.getElementById('searchInput').value.toLowerCase();
            
            let count = 0;
            allLogs.forEach(log => {
                const logLevel = log.querySelector('.log-level').textContent.toLowerCase();
                const logSource = log.querySelector('.log-source').textContent;
                const logMessage = log.querySelector('.log-message').textContent.toLowerCase();
                
                const matchLevel = !level || logLevel === level;
                const matchSource = !source || logSource === source;
                const matchSearch = !search || logMessage.includes(search);
                
                if (matchLevel && matchSource && matchSearch) {
                    log.style.display = 'flex';
                    count++;
                } else {
                    log.style.display = 'none';
                }
            });
            document.getElementById('logCount').textContent = count + ' entries';
        }

        function refreshLogs() { location.reload(); }
        function exportLogs() { alert('Exporting logs...'); }
        function clearLogs() { if (confirm('Clear all logs?')) alert('Logs cleared'); }
        function logout() { localStorage.removeItem('truevault_admin_token'); window.location.href = '/admin/login.html'; }
    </script>
</body>
</html>
