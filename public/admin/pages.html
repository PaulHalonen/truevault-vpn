<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pages - Admin - TrueVault VPN</title>
    <link rel="icon" type="image/svg+xml" href="/assets/images/favicon.svg">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style id="theme-variables">:root{--colors-primary:#00d9ff;--colors-secondary:#00ff88;--colors-accent:#ff6b6b;--colors-background:#0f0f1a;--colors-background-secondary:#1a1a2e;--colors-text:#ffffff;--colors-text-muted:#888888;--colors-success:#00ff88;--colors-warning:#ffbb00;--colors-error:#ff5050;--gradients-primary:linear-gradient(90deg,#00d9ff,#00ff88);--gradients-background:linear-gradient(135deg,#0f0f1a,#1a1a2e);--buttons-border-radius:8px;--cards-border-radius:14px;--colors-border:rgba(255,255,255,0.08);--layout-sidebar-width:260px;}</style>
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/dashboard.css">
    <link rel="stylesheet" href="/assets/css/admin.css">
    <style>
        .pages-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}
        .page-card{background:rgba(255,255,255,0.03);border:1px solid var(--colors-border);border-radius:var(--cards-border-radius);overflow:hidden;transition:all 0.2s}
        .page-card:hover{border-color:var(--colors-primary)}
        .page-preview{height:150px;background:linear-gradient(135deg,rgba(0,217,255,0.1),rgba(0,255,136,0.05));display:flex;align-items:center;justify-content:center;font-size:3rem;border-bottom:1px solid var(--colors-border)}
        .page-info{padding:20px}
        .page-info h3{margin-bottom:5px;font-size:1.1rem}
        .page-info .url{font-family:monospace;font-size:0.85rem;color:var(--colors-primary);margin-bottom:10px}
        .page-meta{display:flex;justify-content:space-between;font-size:0.8rem;color:var(--colors-text-muted);margin-bottom:15px}
        .page-actions{display:flex;gap:8px}
        .new-page-card{background:rgba(255,255,255,0.02);border:2px dashed var(--colors-border);border-radius:var(--cards-border-radius);padding:40px;text-align:center;cursor:pointer;transition:all 0.2s}
        .new-page-card:hover{border-color:var(--colors-primary);background:rgba(255,255,255,0.04)}
        .new-page-card .icon{font-size:3rem;margin-bottom:15px;opacity:0.5}
        .modal{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.8);display:flex;align-items:center;justify-content:center;z-index:1000;opacity:0;visibility:hidden;transition:all 0.3s}
        .modal.active{opacity:1;visibility:visible}
        .modal-content{background:var(--colors-background-secondary);border:1px solid var(--colors-border);border-radius:var(--cards-border-radius);padding:30px;width:100%;max-width:500px}
        .modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px}
        .modal-close{background:none;border:none;color:var(--colors-text-muted);font-size:1.5rem;cursor:pointer}
        .template-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:15px;margin-top:20px}
        .template-option{background:rgba(255,255,255,0.03);border:1px solid var(--colors-border);border-radius:10px;padding:20px;text-align:center;cursor:pointer;transition:all 0.2s}
        .template-option:hover{border-color:var(--colors-primary)}
        .template-option.selected{border-color:var(--colors-success);background:rgba(0,255,136,0.1)}
        .template-option .icon{font-size:2rem;margin-bottom:10px}
    </style>
</head>
<body class="dashboard-body">
    <aside class="sidebar admin-sidebar">
        <div class="sidebar-header"><span class="logo-icon">ğŸ›¡ï¸</span><h1>TrueVault</h1><span class="admin-label">ADMIN</span></div>
        <nav class="sidebar-nav">
            <a href="/admin/dashboard.html" class="nav-item"><span class="nav-icon">ğŸ“Š</span><span>Dashboard</span></a>
            <a href="/admin/users.html" class="nav-item"><span class="nav-icon">ğŸ‘¥</span><span>Users</span></a>
            <a href="/admin/servers.html" class="nav-item"><span class="nav-icon">ğŸ–¥ï¸</span><span>Servers</span></a>
            <a href="/admin/subscriptions.html" class="nav-item"><span class="nav-icon">ğŸ’³</span><span>Subscriptions</span></a>
            <a href="/admin/payments.html" class="nav-item"><span class="nav-icon">ğŸ’°</span><span>Payments</span></a>
            <div class="nav-divider"></div>
            <div class="nav-label">CMS</div>
            <a href="/admin/pages.html" class="nav-item active"><span class="nav-icon">ğŸ“„</span><span>Pages</span></a>
            <a href="/admin/themes.html" class="nav-item"><span class="nav-icon">ğŸ¨</span><span>Theme Editor</span></a>
            <a href="/admin/emails.html" class="nav-item"><span class="nav-icon">ğŸ“§</span><span>Email Templates</span></a>
            <a href="/admin/media.html" class="nav-item"><span class="nav-icon">ğŸ–¼ï¸</span><span>Media Library</span></a>
            <div class="nav-divider"></div>
            <div class="nav-label">System</div>
            <a href="/admin/automation.html" class="nav-item"><span class="nav-icon">âš¡</span><span>Automation</span></a>
            <a href="/admin/logs.html" class="nav-item"><span class="nav-icon">ğŸ“‹</span><span>System Logs</span></a>
            <a href="/admin/settings.html" class="nav-item"><span class="nav-icon">âš™ï¸</span><span>Settings</span></a>
        </nav>
        <div class="sidebar-footer">
            <div class="user-info"><div class="user-avatar admin-avatar">ğŸ‘¤</div><div class="user-details"><span class="user-name" id="adminName">Administrator</span><span class="user-plan">Super Admin</span></div></div>
            <button class="btn btn-secondary btn-small" onclick="adminLogout()">Logout</button>
        </div>
    </aside>
    
    <main class="main-content">
        <header class="dashboard-header">
            <div>
                <h1>ğŸ“„ Page Manager</h1>
                <p class="text-muted">Create and manage website pages with drag-and-drop builder</p>
            </div>
            <button class="btn btn-primary" onclick="showNewPageModal()">â• New Page</button>
        </header>
        
        <!-- Stats -->
        <div class="admin-stats-grid" style="margin-bottom:30px">
            <div class="admin-stat-card">
                <div class="admin-stat-icon">ğŸ“„</div>
                <div class="admin-stat-content">
                    <span class="admin-stat-value">8</span>
                    <span class="admin-stat-label">Total Pages</span>
                </div>
            </div>
            <div class="admin-stat-card">
                <div class="admin-stat-icon active">âœ…</div>
                <div class="admin-stat-content">
                    <span class="admin-stat-value">7</span>
                    <span class="admin-stat-label">Published</span>
                </div>
            </div>
            <div class="admin-stat-card">
                <div class="admin-stat-icon">ğŸ“</div>
                <div class="admin-stat-content">
                    <span class="admin-stat-value">1</span>
                    <span class="admin-stat-label">Drafts</span>
                </div>
            </div>
            <div class="admin-stat-card">
                <div class="admin-stat-icon">ğŸ‘ï¸</div>
                <div class="admin-stat-content">
                    <span class="admin-stat-value">2,458</span>
                    <span class="admin-stat-label">Total Views</span>
                </div>
            </div>
        </div>
        
        <!-- Pages Grid -->
        <div class="pages-grid">
            <!-- Home Page -->
            <div class="page-card">
                <div class="page-preview">ğŸ </div>
                <div class="page-info">
                    <h3>Home Page</h3>
                    <div class="url">/</div>
                    <div class="page-meta">
                        <span>Updated: Jan 10, 2026</span>
                        <span class="badge badge-success">Published</span>
                    </div>
                    <div class="page-actions">
                        <button class="btn btn-primary btn-small" onclick="editPage(1)">âœï¸ Edit</button>
                        <button class="btn btn-secondary btn-small" onclick="previewPage(1)">ğŸ‘ï¸</button>
                        <button class="btn btn-secondary btn-small" onclick="pageSettings(1)">âš™ï¸</button>
                    </div>
                </div>
            </div>
            
            <!-- Pricing Page -->
            <div class="page-card">
                <div class="page-preview">ğŸ’°</div>
                <div class="page-info">
                    <h3>Pricing</h3>
                    <div class="url">/pricing</div>
                    <div class="page-meta">
                        <span>Updated: Jan 8, 2026</span>
                        <span class="badge badge-success">Published</span>
                    </div>
                    <div class="page-actions">
                        <button class="btn btn-primary btn-small" onclick="editPage(2)">âœï¸ Edit</button>
                        <button class="btn btn-secondary btn-small" onclick="previewPage(2)">ğŸ‘ï¸</button>
                        <button class="btn btn-secondary btn-small" onclick="pageSettings(2)">âš™ï¸</button>
                    </div>
                </div>
            </div>
            
            <!-- Features Page -->
            <div class="page-card">
                <div class="page-preview">â­</div>
                <div class="page-info">
                    <h3>Features</h3>
                    <div class="url">/features</div>
                    <div class="page-meta">
                        <span>Updated: Jan 5, 2026</span>
                        <span class="badge badge-success">Published</span>
                    </div>
                    <div class="page-actions">
                        <button class="btn btn-primary btn-small" onclick="editPage(3)">âœï¸ Edit</button>
                        <button class="btn btn-secondary btn-small" onclick="previewPage(3)">ğŸ‘ï¸</button>
                        <button class="btn btn-secondary btn-small" onclick="pageSettings(3)">âš™ï¸</button>
                    </div>
                </div>
            </div>
            
            <!-- About Page -->
            <div class="page-card">
                <div class="page-preview">â„¹ï¸</div>
                <div class="page-info">
                    <h3>About Us</h3>
                    <div class="url">/about</div>
                    <div class="page-meta">
                        <span>Updated: Dec 28, 2025</span>
                        <span class="badge badge-success">Published</span>
                    </div>
                    <div class="page-actions">
                        <button class="btn btn-primary btn-small" onclick="editPage(4)">âœï¸ Edit</button>
                        <button class="btn btn-secondary btn-small" onclick="previewPage(4)">ğŸ‘ï¸</button>
                        <button class="btn btn-secondary btn-small" onclick="pageSettings(4)">âš™ï¸</button>
                    </div>
                </div>
            </div>
            
            <!-- Privacy Policy -->
            <div class="page-card">
                <div class="page-preview">ğŸ”’</div>
                <div class="page-info">
                    <h3>Privacy Policy</h3>
                    <div class="url">/privacy</div>
                    <div class="page-meta">
                        <span>Updated: Dec 20, 2025</span>
                        <span class="badge badge-success">Published</span>
                    </div>
                    <div class="page-actions">
                        <button class="btn btn-primary btn-small" onclick="editPage(5)">âœï¸ Edit</button>
                        <button class="btn btn-secondary btn-small" onclick="previewPage(5)">ğŸ‘ï¸</button>
                        <button class="btn btn-secondary btn-small" onclick="pageSettings(5)">âš™ï¸</button>
                    </div>
                </div>
            </div>
            
            <!-- Terms of Service -->
            <div class="page-card">
                <div class="page-preview">ğŸ“œ</div>
                <div class="page-info">
                    <h3>Terms of Service</h3>
                    <div class="url">/terms</div>
                    <div class="page-meta">
                        <span>Updated: Dec 20, 2025</span>
                        <span class="badge badge-success">Published</span>
                    </div>
                    <div class="page-actions">
                        <button class="btn btn-primary btn-small" onclick="editPage(6)">âœï¸ Edit</button>
                        <button class="btn btn-secondary btn-small" onclick="previewPage(6)">ğŸ‘ï¸</button>
                        <button class="btn btn-secondary btn-small" onclick="pageSettings(6)">âš™ï¸</button>
                    </div>
                </div>
            </div>
            
            <!-- Contact -->
            <div class="page-card">
                <div class="page-preview">ğŸ“§</div>
                <div class="page-info">
                    <h3>Contact</h3>
                    <div class="url">/contact</div>
                    <div class="page-meta">
                        <span>Updated: Dec 15, 2025</span>
                        <span class="badge badge-success">Published</span>
                    </div>
                    <div class="page-actions">
                        <button class="btn btn-primary btn-small" onclick="editPage(7)">âœï¸ Edit</button>
                        <button class="btn btn-secondary btn-small" onclick="previewPage(7)">ğŸ‘ï¸</button>
                        <button class="btn btn-secondary btn-small" onclick="pageSettings(7)">âš™ï¸</button>
                    </div>
                </div>
            </div>
            
            <!-- Draft Page -->
            <div class="page-card" style="opacity:0.7">
                <div class="page-preview">ğŸš§</div>
                <div class="page-info">
                    <h3>New Landing Page</h3>
                    <div class="url">/landing-v2</div>
                    <div class="page-meta">
                        <span>Updated: Jan 11, 2026</span>
                        <span class="badge badge-warning">Draft</span>
                    </div>
                    <div class="page-actions">
                        <button class="btn btn-primary btn-small" onclick="editPage(8)">âœï¸ Edit</button>
                        <button class="btn btn-secondary btn-small" onclick="previewPage(8)">ğŸ‘ï¸</button>
                        <button class="btn btn-success btn-small" onclick="publishPage(8)">ğŸš€</button>
                    </div>
                </div>
            </div>
            
            <!-- New Page Card -->
            <div class="new-page-card" onclick="showNewPageModal()">
                <div class="icon">â•</div>
                <h3>Create New Page</h3>
                <p class="text-muted">Use the drag-and-drop builder</p>
            </div>
        </div>
    </main>
    
    <!-- New Page Modal -->
    <div class="modal" id="newPageModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>â• Create New Page</h2>
                <button class="modal-close" onclick="hideModal()">&times;</button>
            </div>
            <form id="newPageForm">
                <div class="form-group">
                    <label>Page Title *</label>
                    <input type="text" name="title" placeholder="e.g., About Us, Pricing" required>
                </div>
                <div class="form-group">
                    <label>URL Slug *</label>
                    <input type="text" name="slug" placeholder="e.g., about-us, pricing" required>
                </div>
                <div class="form-group">
                    <label>Start From Template</label>
                    <div class="template-grid">
                        <div class="template-option selected" data-template="blank">
                            <div class="icon">ğŸ“„</div>
                            <div>Blank Page</div>
                        </div>
                        <div class="template-option" data-template="landing">
                            <div class="icon">ğŸš€</div>
                            <div>Landing Page</div>
                        </div>
                        <div class="template-option" data-template="content">
                            <div class="icon">ğŸ“</div>
                            <div>Content Page</div>
                        </div>
                        <div class="template-option" data-template="pricing">
                            <div class="icon">ğŸ’°</div>
                            <div>Pricing Page</div>
                        </div>
                    </div>
                </div>
                <div style="display:flex;gap:10px;margin-top:25px">
                    <button type="button" class="btn btn-secondary" onclick="hideModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary" style="flex:1">ğŸ¨ Open Builder</button>
                </div>
            </form>
        </div>
    </div>
    
    <script src="/assets/js/theme-loader.js"></script>
    <script src="/assets/js/app.js"></script>
    <script>
        function checkAdminAuth() {
            const token = localStorage.getItem('truevault_admin_token');
            if (!token) { window.location.href = '/admin/'; return false; }
            return true;
        }
        
        function adminLogout() {
            localStorage.removeItem('truevault_admin_token');
            localStorage.removeItem('truevault_admin');
            window.location.href = '/admin/';
        }
        
        function showNewPageModal() {
            document.getElementById('newPageModal').classList.add('active');
        }
        
        function hideModal() {
            document.getElementById('newPageModal').classList.remove('active');
        }
        
        // Template selection
        document.querySelectorAll('.template-option').forEach(opt => {
            opt.addEventListener('click', function() {
                document.querySelectorAll('.template-option').forEach(o => o.classList.remove('selected'));
                this.classList.add('selected');
            });
        });
        
        document.getElementById('newPageForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const template = document.querySelector('.template-option.selected').dataset.template;
            TrueVault.Toast.success('Opening page builder...');
            hideModal();
            // In production: redirect to GrapesJS builder
            setTimeout(() => {
                TrueVault.Toast.info('GrapesJS builder integration coming soon');
            }, 1000);
        });
        
        function editPage(id) {
            TrueVault.Toast.info('Opening page builder...');
            // In production: redirect to /admin/builder.html?page=id
        }
        
        function previewPage(id) {
            TrueVault.Toast.info('Opening preview...');
        }
        
        function pageSettings(id) {
            TrueVault.Toast.info('Page settings');
        }
        
        function publishPage(id) {
            if (confirm('Publish this page?')) {
                TrueVault.Toast.success('Page published!');
            }
        }
        
        document.getElementById('newPageModal').addEventListener('click', function(e) {
            if (e.target === this) hideModal();
        });
        
        if (checkAdminAuth()) {
            const admin = JSON.parse(localStorage.getItem('truevault_admin') || '{}');
            document.getElementById('adminName').textContent = admin.first_name || 'Administrator';
        }
    </script>
</body>
</html>
