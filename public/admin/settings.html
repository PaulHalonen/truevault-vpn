<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Settings - TrueVault VPN</title>
    <link rel="icon" type="image/svg+xml" href="/assets/images/favicon.svg">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style id="theme-variables">:root{--colors-primary:#00d9ff;--colors-secondary:#00ff88;--colors-accent:#ff6b6b;--colors-background:#0f0f1a;--colors-background-secondary:#1a1a2e;--colors-text:#ffffff;--colors-text-muted:#888888;--colors-success:#00ff88;--colors-warning:#ffbb00;--colors-error:#ff5050;--gradients-primary:linear-gradient(90deg,#00d9ff,#00ff88);--gradients-background:linear-gradient(135deg,#0f0f1a,#1a1a2e);--buttons-border-radius:8px;--cards-border-radius:14px;--colors-border:rgba(255,255,255,0.08);--layout-sidebar-width:260px;}</style>
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/dashboard.css">
    <link rel="stylesheet" href="/assets/css/admin.css">
    <style>
        .settings-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:20px}
        .settings-card{background:rgba(255,255,255,0.03);border:1px solid var(--colors-border);border-radius:var(--cards-border-radius);padding:25px}
        .settings-card h3{font-size:1.1rem;margin-bottom:20px;padding-bottom:15px;border-bottom:1px solid var(--colors-border);display:flex;align-items:center;gap:10px}
        .setting-row{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid rgba(255,255,255,0.03)}
        .setting-row:last-child{border-bottom:none}
        .setting-info h4{font-size:0.95rem;margin-bottom:3px}
        .setting-info p{font-size:0.8rem;color:var(--colors-text-muted)}
        .toggle{position:relative;width:50px;height:26px}
        .toggle input{opacity:0;width:0;height:0}
        .toggle-slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:rgba(255,255,255,0.1);border-radius:26px;transition:0.3s}
        .toggle-slider:before{position:absolute;content:"";height:20px;width:20px;left:3px;bottom:3px;background:white;border-radius:50%;transition:0.3s}
        .toggle input:checked+.toggle-slider{background:var(--colors-success)}
        .toggle input:checked+.toggle-slider:before{transform:translateX(24px)}
        .api-key-box{background:rgba(0,0,0,0.3);border:1px solid var(--colors-border);border-radius:8px;padding:12px;font-family:monospace;font-size:0.85rem;display:flex;align-items:center;gap:10px}
        .api-key-box input{flex:1;background:transparent;border:none;color:var(--colors-text);font-family:monospace}
        .db-status{display:flex;align-items:center;gap:10px;padding:10px;background:rgba(0,255,136,0.1);border:1px solid var(--colors-success);border-radius:8px}
    </style>
</head>
<body class="dashboard-body">
    <aside class="sidebar admin-sidebar">
        <div class="sidebar-header"><span class="logo-icon">ğŸ›¡ï¸</span><h1>TrueVault</h1><span class="admin-label">ADMIN</span></div>
        <nav class="sidebar-nav">
            <a href="/admin/dashboard.html" class="nav-item"><span class="nav-icon">ğŸ“Š</span><span>Dashboard</span></a>
            <a href="/admin/users.html" class="nav-item"><span class="nav-icon">ğŸ‘¥</span><span>Users</span></a>
            <a href="/admin/servers.html" class="nav-item"><span class="nav-icon">ğŸ–¥ï¸</span><span>Servers</span></a>
            <a href="/admin/subscriptions.html" class="nav-item"><span class="nav-icon">ğŸ’³</span><span>Subscriptions</span></a>
            <a href="/admin/payments.html" class="nav-item"><span class="nav-icon">ğŸ’°</span><span>Payments</span></a>
            <div class="nav-divider"></div>
            <div class="nav-label">CMS</div>
            <a href="/admin/pages.html" class="nav-item"><span class="nav-icon">ğŸ“„</span><span>Pages</span></a>
            <a href="/admin/themes.html" class="nav-item"><span class="nav-icon">ğŸ¨</span><span>Theme Editor</span></a>
            <a href="/admin/emails.html" class="nav-item"><span class="nav-icon">ğŸ“§</span><span>Email Templates</span></a>
            <a href="/admin/media.html" class="nav-item"><span class="nav-icon">ğŸ–¼ï¸</span><span>Media Library</span></a>
            <div class="nav-divider"></div>
            <div class="nav-label">System</div>
            <a href="/admin/automation.html" class="nav-item"><span class="nav-icon">âš¡</span><span>Automation</span></a>
            <a href="/admin/logs.html" class="nav-item"><span class="nav-icon">ğŸ“‹</span><span>System Logs</span></a>
            <a href="/admin/settings.html" class="nav-item active"><span class="nav-icon">âš™ï¸</span><span>Settings</span></a>
        </nav>
        <div class="sidebar-footer">
            <div class="user-info"><div class="user-avatar admin-avatar">ğŸ‘¤</div><div class="user-details"><span class="user-name" id="adminName">Administrator</span><span class="user-plan">Super Admin</span></div></div>
            <button class="btn btn-secondary btn-small" onclick="adminLogout()">Logout</button>
        </div>
    </aside>
    
    <main class="main-content">
        <header class="dashboard-header">
            <div>
                <h1>âš™ï¸ System Settings</h1>
                <p class="text-muted">Configure TrueVault VPN system settings</p>
            </div>
            <button class="btn btn-primary" onclick="saveAllSettings()">ğŸ’¾ Save All Changes</button>
        </header>
        
        <div class="settings-grid">
            <!-- General Settings -->
            <div class="settings-card">
                <h3>ğŸ¢ General Settings</h3>
                <div class="form-group">
                    <label>Site Name</label>
                    <input type="text" value="TrueVault VPN">
                </div>
                <div class="form-group">
                    <label>Support Email</label>
                    <input type="email" value="paulhalonen@gmail.com">
                </div>
                <div class="form-group">
                    <label>Default Timezone</label>
                    <select>
                        <option value="America/Chicago" selected>Central Time (US)</option>
                        <option value="America/New_York">Eastern Time (US)</option>
                        <option value="America/Los_Angeles">Pacific Time (US)</option>
                        <option value="UTC">UTC</option>
                    </select>
                </div>
            </div>
            
            <!-- Database Status -->
            <div class="settings-card">
                <h3>ğŸ—„ï¸ Database Status</h3>
                <div class="db-status">
                    <span style="font-size:1.2rem">âœ…</span>
                    <div>
                        <strong>SQLite Databases Connected</strong>
                        <div class="text-muted" style="font-size:0.8rem">21 databases healthy</div>
                    </div>
                </div>
                <div style="margin-top:15px">
                    <div class="setting-row">
                        <span>users.db</span>
                        <span class="badge badge-success">OK</span>
                    </div>
                    <div class="setting-row">
                        <span>vpn.db</span>
                        <span class="badge badge-success">OK</span>
                    </div>
                    <div class="setting-row">
                        <span>certificates.db</span>
                        <span class="badge badge-success">OK</span>
                    </div>
                    <div class="setting-row">
                        <span>themes.db</span>
                        <span class="badge badge-success">OK</span>
                    </div>
                </div>
                <button class="btn btn-secondary btn-small" style="margin-top:15px" onclick="checkDatabases()">ğŸ”„ Check All</button>
            </div>
            
            <!-- PayPal Integration -->
            <div class="settings-card">
                <h3>ğŸ’³ PayPal Integration</h3>
                <div class="form-group">
                    <label>Mode</label>
                    <select id="paypalMode">
                        <option value="sandbox">Sandbox (Testing)</option>
                        <option value="live" selected>Live</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Client ID</label>
                    <div class="api-key-box">
                        <input type="password" value="ActD2XQKe8EkUNI8eZakmhR8964d2kAdh7rcpbkm2rbr8rrtEOoOdmoj50FtXmy1XLYzALL5ogvxcagk" id="paypalClientId">
                        <button class="btn btn-secondary btn-small" onclick="toggleVisibility('paypalClientId')">ğŸ‘ï¸</button>
                    </div>
                </div>
                <div class="form-group">
                    <label>Secret Key</label>
                    <div class="api-key-box">
                        <input type="password" value="EIc2idTcm_YjKf4pNxXpRr_vBt0Ebb3FCp71H2fTI3T9NAi_iAvlrwYbEaidmP23IynWSqfP6nkAXwGN" id="paypalSecret">
                        <button class="btn btn-secondary btn-small" onclick="toggleVisibility('paypalSecret')">ğŸ‘ï¸</button>
                    </div>
                </div>
                <div class="form-group">
                    <label>Webhook URL</label>
                    <input type="text" value="https://builder.the-truth-publishing.com/api/paypal-webhook.php" readonly>
                </div>
            </div>
            
            <!-- Email Settings -->
            <div class="settings-card">
                <h3>ğŸ“§ Email Settings</h3>
                <div class="form-group">
                    <label>SMTP Host</label>
                    <input type="text" value="smtp.gmail.com">
                </div>
                <div class="form-group">
                    <label>SMTP Port</label>
                    <input type="number" value="587">
                </div>
                <div class="form-group">
                    <label>From Email</label>
                    <input type="email" value="noreply@truevault.com">
                </div>
                <div class="form-group">
                    <label>From Name</label>
                    <input type="text" value="TrueVault VPN">
                </div>
                <button class="btn btn-secondary btn-small" onclick="testEmail()">ğŸ“¤ Send Test Email</button>
            </div>
            
            <!-- Security Settings -->
            <div class="settings-card">
                <h3>ğŸ”’ Security Settings</h3>
                <div class="setting-row">
                    <div class="setting-info">
                        <h4>Two-Factor Required for Admins</h4>
                        <p>Require 2FA for all admin accounts</p>
                    </div>
                    <label class="toggle">
                        <input type="checkbox" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="setting-row">
                    <div class="setting-info">
                        <h4>Rate Limiting</h4>
                        <p>Limit API requests per minute</p>
                    </div>
                    <label class="toggle">
                        <input type="checkbox" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="setting-row">
                    <div class="setting-info">
                        <h4>IP Blocking</h4>
                        <p>Block suspicious IPs automatically</p>
                    </div>
                    <label class="toggle">
                        <input type="checkbox" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="form-group" style="margin-top:15px">
                    <label>Session Timeout (minutes)</label>
                    <input type="number" value="60">
                </div>
            </div>
            
            <!-- VIP Settings -->
            <div class="settings-card">
                <h3>ğŸ‘‘ VIP Configuration</h3>
                <div class="form-group">
                    <label>VIP Server ID</label>
                    <input type="number" value="2" readonly>
                </div>
                <div class="form-group">
                    <label>VIP Server IP</label>
                    <input type="text" value="144.126.133.253" readonly>
                </div>
                <div class="form-group">
                    <label>Authorized VIP Email</label>
                    <input type="email" value="seige235@yahoo.com">
                    <small class="text-muted">Only this email can access the VIP server</small>
                </div>
            </div>
            
            <!-- API Keys -->
            <div class="settings-card">
                <h3>ğŸ”‘ API Configuration</h3>
                <div class="form-group">
                    <label>JWT Secret</label>
                    <div class="api-key-box">
                        <input type="password" value="truevault_jwt_secret_key_2025_secure" id="jwtSecret">
                        <button class="btn btn-secondary btn-small" onclick="toggleVisibility('jwtSecret')">ğŸ‘ï¸</button>
                        <button class="btn btn-secondary btn-small" onclick="regenerateKey('jwt')">ğŸ”„</button>
                    </div>
                </div>
                <div class="form-group">
                    <label>Token Expiration (hours)</label>
                    <input type="number" value="168">
                </div>
            </div>
            
            <!-- Maintenance Mode -->
            <div class="settings-card">
                <h3>ğŸ”§ Maintenance</h3>
                <div class="setting-row">
                    <div class="setting-info">
                        <h4>Maintenance Mode</h4>
                        <p>Show maintenance page to users</p>
                    </div>
                    <label class="toggle">
                        <input type="checkbox">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="form-group" style="margin-top:15px">
                    <label>Maintenance Message</label>
                    <textarea rows="3" placeholder="We're performing scheduled maintenance..."></textarea>
                </div>
                <div style="display:flex;gap:10px;margin-top:15px">
                    <button class="btn btn-secondary btn-small" onclick="clearCache()">ğŸ—‘ï¸ Clear Cache</button>
                    <button class="btn btn-secondary btn-small" onclick="backupDatabase()">ğŸ’¾ Backup DB</button>
                </div>
            </div>
        </div>
    </main>
    
    <script src="/assets/js/theme-loader.js"></script>
    <script src="/assets/js/app.js"></script>
    <script>
        function checkAdminAuth() {
            const token = localStorage.getItem('truevault_admin_token');
            if (!token) { window.location.href = '/admin/'; return false; }
            return true;
        }
        
        function adminLogout() {
            localStorage.removeItem('truevault_admin_token');
            localStorage.removeItem('truevault_admin');
            window.location.href = '/admin/';
        }
        
        function toggleVisibility(inputId) {
            const input = document.getElementById(inputId);
            input.type = input.type === 'password' ? 'text' : 'password';
        }
        
        function regenerateKey(type) {
            if (!confirm('Regenerate this key? Existing sessions may be invalidated.')) return;
            TrueVault.Toast.success(`${type.toUpperCase()} key regenerated`);
        }
        
        function saveAllSettings() {
            TrueVault.Toast.success('Settings saved successfully!');
        }
        
        function checkDatabases() {
            TrueVault.Toast.success('All databases healthy');
        }
        
        function testEmail() {
            TrueVault.Toast.info('Sending test email...');
            setTimeout(() => TrueVault.Toast.success('Test email sent!'), 1500);
        }
        
        function clearCache() {
            TrueVault.Toast.success('Cache cleared');
        }
        
        function backupDatabase() {
            TrueVault.Toast.info('Creating backup...');
            setTimeout(() => TrueVault.Toast.success('Backup created successfully'), 2000);
        }
        
        if (checkAdminAuth()) {
            const admin = JSON.parse(localStorage.getItem('truevault_admin') || '{}');
            document.getElementById('adminName').textContent = admin.first_name || 'Administrator';
        }
    </script>
</body>
</html>
